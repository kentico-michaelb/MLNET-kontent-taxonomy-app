# Kentico Kontent sample Taxonomy Machine Learning Tool
A sample .NET Core 3.1 console application using the [Kentico Kontent Delivery .NET SDK](https://github.com/Kentico/kontent-delivery-sdk-net), [Kentico Kontent Management SDK](https://github.com/Kentico/kontent-management-sdk-net), and [ML.NET](https://dotnet.microsoft.com/apps/machinelearning-ai/ml-dotnet).

This application demonstrates how to use [ML.NET's multiclass classification](https://docs.microsoft.com/en-us/dotnet/machine-learning/tutorials/github-issue-classification) to suggest taxonomy terms for Kentico Kontent content item variants. 
The application retrieves movies from a Kentico Kontent project then, uses an ML.NET model to predict what category the movie should be listed in based upon its title, description, and rating (e.g. PG, PG-13, R, etc.). After making a prediction, the application upserts the predicted "listed in" taxonomy term to the movie in the Kentico Kontent project.

Included in this repository is the ML.NET Model and ML.NET Console application projects generated by the [ML.NET Model Builder Extension](https://marketplace.visualstudio.com/items?itemName=MLNET.07), as well as the [Netflix movie data](https://github.com/kentico-michaelb/MLNET-kontent-taxonomy-app/blob/master/MLNET-kontent-taxonomy-app/files/netflix_movies.csv) used to train the model, and an [export package](https://github.com/kentico-michaelb/MLNET-kontent-taxonomy-app/blob/master/MLNET-kontent-taxonomy-app/files/Kontent_project_export.zip) for creating the Movies project in Kentico Kontent.

## Kentico Kontent setup

### Creating the Movies project using the [Template Manager](https://kentico.github.io/kontent-template-manager/import-from-file)
1. Sign in to your [Kentico Kontent account](https://app.kontent.ai).
1. [Create a new project](https://docs.kontent.ai/tutorials/set-up-projects/manage-projects/managing-projects#a-creating-projects)
1. In Kentico Kontent, choose Project settings from the app menu.
1. Under Development, choose API keys and copy the Project ID
1. Paste the copied ID into the Project ID input on the [Template Manager](https://kentico.github.io/kontent-template-manager/import-from-file)
1. Enable the Management API and repeat step 5 with the Management API key and Template Manager input field
1. Drop the [project export package](https://github.com/kentico-michaelb/MLNET-kontent-taxonomy-app/blob/master/MLNET-kontent-taxonomy-app/files/Kontent_project_export.zip) onto the Template Manager
1. Uncheck "Publish import items"
1. Click "Prepare import data"
1. Click "Proceed with import"
1. Proceed to "Application setup" instructions below

===Under Construction===
Kentico Kontent project import instructions coming soon.

## Application setup

### Running the application
To run the app:
1. Clone the app repository with your favorite GIT client
   1. For instance, you can use [Visual Studio](https://www.visualstudio.com/vs/), [Visual Studio Code](https://code.visualstudio.com/), [GitHub Desktop](https://desktop.github.com/), etc.
   1. Alternatively, you can download the repo as a ZIP file, however, this will not adapt line endings in downloaded files to your platform (Windows, Unix).
1. Open the solution in Visual Studio (using the _MLNET-kontent-taxonomy-app.sln_ file).
1. Follow instructions below to connect to your Movies project

### Connecting to your Movies project

1. In Kentico Kontent, choose Project settings from the app menu.
1. Under Development, choose API keys. 
    1. You will need the **Project ID**, **Preview API**, and **Management API** keys.
1. Open the `~\MLNET-kontent-taxonomy-app\appsettings.json` file.
1. Use the values from your Kentico Kontent project in the `appsettings.json` file:
```json
{
  "KontentKeys": {
    "ProjectId": "<YOUR PROJECT ID>",
    "PreviewApiKey": "<YOUR PREVIEW API KEY>",
    "ManagementApiKey": "<YOUR MANAGEMENT API KEY>"
  }
}
```
5. Save the changes.
6. Run the application.
